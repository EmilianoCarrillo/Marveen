<!DOCTYPE HTML>
<html>
	<head>
		<title>Marveen</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" type="image/png" href="images/logo1.png" />
	</head>
	<body class="landing">
		<?php
	require_once('TwitterAPIExchange.php');
	require('vendor/autoload.php');
	$settings = array(
    'oauth_access_token' => "860092922657619969-O75q6QXhZZUcIygfEMHFa2E5zd2IGSP",
    'oauth_access_token_secret' => "e7BqhLAmxzl2fek9KYeNzpKpPkAOOt7uXURlcwP4cGiGe",
    'consumer_key' => "HhHKXbCf940bmiJyIABPfQnmc",
    'consumer_secret' => "ptbPNPWJgMg9SmvTxsTsbeRyC8DqKIHL1g3NGqs5WTGsXRM5OU"
	);
	$url = 'https://api.twitter.com/1.1/search/tweets.json';
	$getfield = '?q=Esposa Embarazada';
	$requestMethod = 'GET';

	$twitter = new TwitterAPIExchange($settings);
	$response = $twitter->setGetfield($getfield)
	    ->buildOauth($url, $requestMethod)
	    ->performRequest();
	$string = json_decode($response,$assoc = TRUE);
	/*echo "<pre>";
	print_r($string);
	echo "</pre>";*/
	$ml = new MonkeyLearn\Client('f236e4aa52b79a80060ebebcdb39be039e19dc21');
	$mat;
	$tam=0;
	$key=array(
		"No cliente"=>"N",
		"Cliente"=>"S",
		"Mal servicio al cliente"=>"M",
		"Delincuencia"=>"D",
		"Transacciones"=>"T",
	);
	foreach($string as $items)
    {
    	foreach($items as $pos)
    	{
	        /*echo "Time and Date of Tweet: ".$pos['created_at']."<br />";
	        echo "Tweet: ". $pos['text']."<br />";
	        echo "Tweeted by: ". $pos['user']['name']."<br />";
	        echo "Screen name: ". $pos['user']['screen_name']."<br />";
	        echo "Location: ". $pos['user']['location']."<br />";¨*/
	        $text_list = [$pos['text']];
			$module_id = 'cl_iyn2vbwe';
			$res = $ml->classifiers->classify($module_id, $text_list, true);
			$mat[$tam]= array($pos['user']['screen_name'],$pos['text'],$pos['user']['location'],$key[$res->result['0']['0']['label']]);
			/*echo $pos['user']['screen_name']." ".$pos['text']." ".$pos['user']['location']." ".$key[$res->result['0']['0']['label']]."<br>";*/
			$tam++;
    	}
    	break;
    }
   	$getfield = '?q=#Bancomer';
	$requestMethod = 'GET';

	$response = $twitter->setGetfield($getfield)
	    ->buildOauth($url, $requestMethod)
	    ->performRequest();
	$string = json_decode($response,$assoc = TRUE);
	/*echo "<pre>";
	print_r($string);
	echo "</pre>";*/
	$m2 = new MonkeyLearn\Client('6690ba1c2b26279c0fa7f5c6c6a3ee2b5f1c2bc1');
	foreach($string as $items)
    {
    	foreach($items as $pos)
    	{
	        /*echo "Time and Date of Tweet: ".$pos['created_at']."<br />";
	        echo "Tweet: ". $pos['text']."<br />";
	        echo "Tweeted by: ". $pos['user']['name']."<br />";
	        echo "Screen name: ". $pos['user']['screen_name']."<br />";
	        echo "Location: ". $pos['user']['location']."<br />";*/
	        $text_list = [$pos['text']];
			$module_id = 'cl_kWHXGtmf';
			$res = $m2->classifiers->classify($module_id, $text_list, true);
			$mat[$tam]=array($pos['user']['screen_name'],$pos['text'],$pos['user']['location'],$key[$res->result['0']['0']['label']]);
			/*echo "<br>";
			echo $pos['user']['screen_name']." ".$pos['text']." ".$pos['user']['location']." ".$key[$res->result['0']['0']['label']]."<br>";*/
			$tam++
    	}
    	break;
    }
?>
		<!-- Header -->
			<header id="header" class="alt">
				<h1><strong><a href="index.html">Desarrollada con ♥️ por <br/></a></strong><span id="TTM">The Turing Machines</span></h1>
				<nav id="nav">
					<ul>
						<li><a href="#one">Qué es Marveen</a></li>
						<li><a href="#two">Gráficos</a></li>
						<li><a href="#footer">Contacto</a></li>
					</ul>
				</nav>
			</header>

			<a href="#menu" class="navPanelToggle"><span class="fa fa-bars"></span></a>

		<!-- Banner -->
			<section id="banner">
        <img src="images/logo1.png" alt="logo" id="Logo">
				<h2>Marveen</h2>
				<p>Maximiza la influencia de tu empresa bancaria en las redes sociales.</p>
				<ul class="actions">
					<li><a href="#" class="button special big">VER VIDEO</a></li>
				</ul>
			</section>

			<!-- One -->
				<section id="one" class="wrapper style1">
					<div class="container 75%">
						<div class="row 200%">
							<div class="6u 12u$(medium)">
								<header class="major">
									<h2>Machine learning para el análisis de tu empresa.</h2>

								</header>
							</div>
							<div class="6u$ 12u$(medium)">
								<p>Marveen es una aplicación web que te permite encontrar demandas realizadas por tus clientes a través de twitter de manera fácil y rápida siendo asistido por un algoritmo de Machine Learning para hacer más efectivo el filtrado de datos y la solución de sus problemas.</p>
								<p>Además, identifica y contacta con posibles candidatos a clientes que cuenten con necesidades de obtener préstamos personales, como recientes embarazos, para ofertarles tus servicios.</p>
							</div>
						</div>
					</div>
				</section>

			<!-- Two -->
				<section id="two" class="wrapper style2 special">
					<div class="container">
						<header class="major">
							<h2>Mapa de Calor</h2>
							<p>Encuentra los lugares con mayor actividad</p>
						</header>
              <div id="map"></div>
              <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAE-QydAvrtD9OwHVDkQDARf8WoUxOG9OY&libraries=visualization&callback=initMap" async defer></script>


<table class="container" class = "tablitas">
	<thead>
		<tr>
			<th><h1>Usuario</h1></th>
			<th><h1>Categoría</h1></th>
			<th><h1>Ubicación</h1></th>
			<th><h1>Texto</h1></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Google</td>
			<td>9518</td>
			<td>6369</td>
			<td>01:32:50</td>
		</tr>
		<tr>
			<td>Twitter</td>
			<td>7326</td>
			<td>10437</td>
			<td>00:51:22</td>
		</tr>
		<tr>
			<td>Amazon</td>
			<td>4162</td>
			<td>5327</td>
			<td>00:24:34</td>
		</tr>
    <tr>
			<td>LinkedIn</td>
			<td>3654</td>
			<td>2961</td>
			<td>00:12:10</td>
		</tr>
    <tr>
			<td>CodePen</td>
			<td>2002</td>
			<td>4135</td>
			<td>00:46:19</td>
		</tr>
    <tr>
			<td>GitHub</td>
			<td>4623</td>
			<td>3486</td>
			<td>00:31:52</td>
		</tr>
	</tbody>
</table>
					</div>
				</section>

        <!-- Four -->
  				<section id="four" class="wrapper style3 special">
  					<div class="container">
  						<header class="major" id = "BBVA">
                <p>Reto propuesto por:</p>
  							<h2>BBVA BANCOMER</h2>
  						</header>
  					</div>
  				</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="#" class="icon fa-coffee"></a></li>
						<li><a href="https://github.com/emiliano-carrillo/Marveen" target="_blank" class="icon fa-github"></a></li>
						<li><a href="#" id = "pizza" class="icon material-icons">local_pizza</a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; The Turing Machines</li>
						<li>Hecho en HACK PUEBLA 3.0</li>
						<li>Powered by coffee and pizza</li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
      <script src="assets/js/map.js"></script>
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
